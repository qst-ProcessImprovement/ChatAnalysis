# プロンプト更新機能

このリポジトリには、感情分析に使用されるプロンプトを外部ファイルに分離し、AIを使って更新する機能が追加されました。

## ファイル構成

- `prompts.py`: 感情分析と傾向分析に使用されるプロンプトを含むファイル
- `update_prompts.py`: OpenAIのAPIを使用してプロンプトを更新するPythonスクリプト
- `update_prompts.sh`: プロンプト更新プロセスを実行するシェルスクリプト

## 使用方法

### プロンプトの更新

プロンプトを更新するには、以下のコマンドを実行します：

```bash
./update_prompts.sh [オプション]
```

#### オプション

- `--prompt`: 更新するプロンプトを指定します。
  - `emotion`: 感情分析プロンプトのみを更新
  - `trend`: 傾向分析プロンプトのみを更新
  - `both`: 両方のプロンプトを更新（デフォルト）
- `--model`: 使用するOpenAIのモデルを指定します。デフォルトは `gpt-4o-mini` です。

#### 例

感情分析プロンプトのみを更新する：
```bash
./update_prompts.sh --prompt emotion
```

傾向分析プロンプトのみを更新する：
```bash
./update_prompts.sh --prompt trend
```

両方のプロンプトをGPT-4oモデルで更新する：
```bash
./update_prompts.sh --prompt both --model gpt-4o
```

### 動作の流れ

1. スクリプトは現在の `prompts.py` ファイルからプロンプトを読み取ります。
2. OpenAI APIを使用して、指定されたプロンプトの改善版を生成します。
3. 新しいプロンプトで `prompts.py` ファイルを更新します。
4. 新しいブランチを作成し、変更をコミットしてプッシュします。
5. GitHub CLIがインストールされている場合は、プルリクエストを作成します。

## 注意事項

- このスクリプトを実行するには、`.env` ファイルに有効なOpenAI APIキーが設定されている必要があります。
- プロンプトの更新には、OpenAI APIの使用料金が発生する場合があります。
- プロンプトの更新は、元のプロンプトの機能を維持しながら改善することを目的としています。 